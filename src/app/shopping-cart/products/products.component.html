<div class="container">
  <div class="row">
    <!-- <div *ngIf="sessionCart" class="col-3">
      {{sessionCart.totalQty}}
    </div> -->
    <div class="col">
      <div class="row">
        <ng-container *ngFor="let product of products; let i = index">
          <div class="col">
            <div *ngIf="product.title" class="card">
              <img *ngIf="product.imageUrl" src="{{ product.imageUrl }}" class="card-img-top" alt="pic">
              <div class="card-body">
                <h5 class="card-title">{{ product.title }}</h5>
                <p class="card-text">{{ product.price | currency:'USD':symbol }}</p>
              </div>
              <div class="card-footer">
                <button *ngIf="!sessionCart || !sessionCart.items[product._id] || sessionCart.items[product._id].qty === 0; else updateQuantity"
                  (click)="addToCart(product)" 
                  class="btn btn-secondary btn-block">Add To Cart</button>
                <ng-template #updateQuantity>
                  <div class="row no-gutters"> 
                    <div class="col-2">
                      <button
                        (click)="removeFromCart(product)"
                        class="btn btn-secondary btn-block">-</button>
                    </div>
                    <div class="col text-center" *ngIf="sessionCart">
                      {{sessionCart.items[product._id].qty}}
                    </div>
                    <div class="col-2">
                      <button 
                        (click)="addToCart(product)"
                        class="btn btn-secondary btn-block">+</button>
                    </div>
                  </div>
                </ng-template>
              </div>
            </div>
          </div>
          <div *ngIf="(i+1) %3 === 0" class="w-100"></div>
        </ng-container>
      </div>
    </div>
  </div>
</div>